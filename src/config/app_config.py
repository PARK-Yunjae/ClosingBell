"""
ClosingBell μ•± μ „μ—­ μ„¤μ •
- λ²„μ „ μ •λ³΄
- λ°μ΄ν„° κ²½λ΅ (μ λ€κ²½λ΅)
- ν‘μ‹ λ¬Έκµ¬

v8.0 - 7ν•µμ‹¬ μ§€ν‘ + κ±°λμ› νΈμ… + κ°μ‹μΆ…λ© λ¦¬λ„¤μ„
"""

from pathlib import Path
import os

# ============================================================
# λ²„μ „ μ •λ³΄
# ============================================================
APP_VERSION = "v8.0"
APP_NAME = "ClosingBell"
AI_ENGINE = "Gemini 2.5 Flash"
BROKER_API = "ν‚¤μ›€μ¦κ¶ REST API"

# μ „μ²΄ λ²„μ „ λ¬Έμμ—΄
APP_FULL_VERSION = f"{APP_NAME} {APP_VERSION}"

# ============================================================
# λ°μ΄ν„° κ²½λ΅ (μ λ€κ²½λ΅ - ν™κ²½λ³€μ λλ” κΈ°λ³Έκ°’)
# ============================================================
# Windows λ΅μ»¬ ν™κ²½ κΈ°λ³Έκ°’
DEFAULT_DATA_DIR = r"C:\Coding\data"

# ν™κ²½λ³€μμ—μ„ λ΅λ“ (μ—†μΌλ©΄ κΈ°λ³Έκ°’)
DATA_DIR = Path(os.getenv("DATA_DIR", DEFAULT_DATA_DIR))
OHLCV_DIR = DATA_DIR / "ohlcv_kiwoom"  # v7.0: ν‚¤μ›€ κΈ°λ°
OHLCV_FULL_DIR = DATA_DIR / "ohlcv"  # 3λ…„+ μ „μ²΄ λ°μ΄ν„°
GLOBAL_DIR = DATA_DIR / "global"
MAPPING_FILE = DATA_DIR / "stock_mapping.csv"
GLOBAL_MERGED_FILE = DATA_DIR / "global_merged.csv"

# ============================================================
# ν‘μ‹ λ¬Έκµ¬ ν…ν”λ¦Ώ
# ============================================================
# λ€μ‹λ³΄λ“ ν‘Έν„°
FOOTER_DASHBOARD = f"{APP_FULL_VERSION}"
FOOTER_WITH_SOURCE = f"{APP_FULL_VERSION} | {{source}} | {AI_ENGINE}"

# μ λ©λ―Ό κ³µλ¶€λ²• ν‘Έν„°
FOOTER_NOMAD = f"{APP_FULL_VERSION} | μ λ©λ―Ό κ³µλ¶€λ²• | λ„¤μ΄λ²„ κΈμµ + DART + {AI_ENGINE}"

# TOP5 ν‘Έν„°
FOOTER_TOP5 = f"{APP_FULL_VERSION} | D+1 ~ D+20 μμµλ¥  λ¶„μ„"

# μΆ…λ© κ²€μƒ‰ ν‘Έν„°
FOOTER_SEARCH = f"{APP_FULL_VERSION} | μΆ…λ© μƒμ„Έ λ¶„μ„"

# Discord ν‘Έν„°
FOOTER_DISCORD = f"{APP_FULL_VERSION}"

# ============================================================
# μ‚¬μ΄λ“λ°” μ„¤μ •
# ============================================================
SIDEBAR_TITLE = f"π”” {APP_NAME}"
SIDEBAR_VERSION = APP_VERSION

# ============================================================
# νμ΄μ§€λ³„ μ λ©
# ============================================================
PAGE_TITLES = {
    "home": "π  ν™",
    "top5": "π“ κ°μ‹μΆ…λ© TOP5",
    "nomad": "π“ μ λ©λ―Ό κ³µλ¶€λ²•",
    "search": "π” μΆ…λ© κ²€μƒ‰",
    "broker_flow": "πΆ κ±°λμ› μκΈ‰ μ¶”μ ",
    "analysis": "π§­ μΆ…λ© μ‹¬μΈµ λ¶„μ„",
}

# ============================================================
# λ°μ΄ν„° μ†μ¤ ν‘μ‹
# ============================================================
DATA_SOURCES = {
    "kiwoom": "ν‚¤μ›€μ¦κ¶ REST API",  # v7.0
    "naver": "λ„¤μ΄λ²„ κΈμµ",
    "dart": "DART μ „μκ³µμ‹",
    "ai": AI_ENGINE,
}

# ============================================================
# UI μ„¤μ •
# ============================================================
# μ λ©λ―Ό μΆ…λ© μΉ΄λ“ μ—΄ μ
NOMAD_CARD_COLUMNS = 3  # κΈ°λ³Έ 3μ—΄ (λ°μ‘ν•μΌλ΅ μ΅°μ )

# TOP5 μΉ΄λ“ μ—΄ μ
TOP5_CARD_COLUMNS = 5

# μƒμ„Έ λ¶„μ„ νƒ­
DETAIL_TABS = ["κΈ°μ—…μ •λ³΄", "λ‰΄μ¤", "AI λ¶„μ„"]

# ============================================================
# λ©”μ‹μ§€ μƒμ
# ============================================================
MSG_COMPANY_INFO_AUTO = "κΈ°μ—…μ •λ³΄λ” λ§¤μΌ μλ™ μμ§‘λ©λ‹λ‹¤."
MSG_NO_PER = "PER λ―Έμ κ³µ (μ μ λλ” μ‹ κ·μƒμ¥)"
MSG_NO_PBR = "PBR λ―Έμ κ³µ"
MSG_NO_ROE = "ROE λ―Έμ κ³µ"

# λ¦¬μ¤ν¬ κ΄€λ ¨
MSG_AUDIT_OK = "κ°μ‚¬μκ²¬: μ μ • β…"
MSG_AUDIT_WARNING = "κ°μ‚¬μκ²¬: ν™•μΈ ν•„μ” β οΈ"
MSG_AUDIT_DANGER = "κ°μ‚¬μκ²¬: μ„ν— π¨"

# ============================================================
# μƒ‰μƒ (Streamlit/Discord)
# ============================================================
COLORS = {
    "success": "#28a745",
    "warning": "#ffc107", 
    "danger": "#dc3545",
    "info": "#17a2b8",
    "primary": "#007bff",
    
    # λ“±κΈ‰λ³„ μƒ‰μƒ
    "grade_s": "#FFD700",  # κΈμƒ‰
    "grade_a": "#C0C0C0",  # μ€μƒ‰
    "grade_b": "#CD7F32",  # λ™μƒ‰
    "grade_c": "#808080",  # νμƒ‰
    "grade_d": "#A0A0A0",  # μ—°νμƒ‰
    
    # μƒν•κ°€/ν•ν•κ°€
    "limit_up": "#FF0000",
    "limit_down": "#0000FF",
}

# ============================================================
# μ ν‹Έλ¦¬ν‹° ν•¨μ
# ============================================================
def get_footer(source: str = None) -> str:
    """μ†μ¤ ν¬ν•¨ ν‘Έν„° λ¬Έμμ—΄ λ°ν™"""
    if source:
        return FOOTER_WITH_SOURCE.format(source=source)
    return FOOTER_DASHBOARD


def get_version_display() -> str:
    """λ²„μ „ ν‘μ‹μ© λ¬Έμμ—΄"""
    return f"{APP_NAME} {APP_VERSION}"


# ============================================================
# λ””λ²„κ·Έμ©
# ============================================================
if __name__ == "__main__":
    print(f"μ•± λ²„μ „: {APP_FULL_VERSION}")
    print(f"AI μ—”μ§„: {AI_ENGINE}")
    print(f"λ°μ΄ν„° λ””λ ‰ν† λ¦¬: {DATA_DIR}")
    print(f"OHLCV λ””λ ‰ν† λ¦¬: {OHLCV_DIR}")
    print(f"λ§¤ν•‘ νμΌ: {MAPPING_FILE}")
    print()
    print(f"ν‘Έν„° (λ€μ‹λ³΄λ“): {FOOTER_DASHBOARD}")
    print(f"ν‘Έν„° (μ λ©λ―Ό): {FOOTER_NOMAD}")
    print(f"ν‘Έν„° (TOP5): {FOOTER_TOP5}")
