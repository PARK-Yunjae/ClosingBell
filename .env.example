# ===========================================
# 종가매매 스크리너 환경 변수 설정
# ===========================================
# 이 파일을 .env로 복사한 후 실제 값을 입력하세요.
# cp .env.example .env (Linux/Mac)
# copy .env.example .env (Windows)

# -------------------------------------------
# 키움증권 REST API 설정 (필수) ★ v7.0 신규
# -------------------------------------------
# 키움증권 REST API에서 발급받은 키
# 발급 방법:
# 1. 키움증권 계좌 개설
# 2. 영웅문4 HTS에서 조건검색식 등록
# 3. 키움 REST API 포털에서 appkey/secretkey 발급

KIWOOM_APPKEY=YOUR_APPKEY_HERE
KIWOOM_SECRETKEY=YOUR_SECRETKEY_HERE

# API 서버 URL
# 실전: https://api.kiwoom.com
# 모의: https://mockapi.kiwoom.com (KRX만 지원)
KIWOOM_BASE_URL=https://api.kiwoom.com

# 모의투자 사용 여부 (true면 mockapi 도메인 사용)
KIWOOM_USE_MOCK=false

# -------------------------------------------
# [레거시] 한국투자증권 API 설정 (사용 안함)
# -------------------------------------------
# v7.0부터 키움 REST API로 완전 전환됨
# 아래 설정은 호환성을 위해 남겨둠 (실제 사용 X)

KIS_APP_KEY=
KIS_APP_SECRET=
KIS_ACCOUNT_NO=
KIS_BASE_URL=https://openapi.koreainvestment.com:9443
KIS_HTS_ID=

# -------------------------------------------
# 디스코드 웹훅 설정 (권장)
# -------------------------------------------
# 디스코드 서버 > 채널설정 > 연동 > 웹후크에서 생성
# 
# 설정 방법:
# 1. 디스코드에서 알림받을 채널 선택
# 2. 채널 설정 > 연동 > 웹후크 > 새 웹후크
# 3. 웹후크 URL 복사

DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN

# Dry-run 모드 (true면 웹훅 발송 대신 콘솔 출력)
DISCORD_DRY_RUN=false

# -------------------------------------------
# 데이터베이스 설정
# -------------------------------------------
# SQLite DB 파일 경로 (기본값: data/screener.db)
DB_PATH=data/screener.db

# -------------------------------------------
# 로깅 설정
# -------------------------------------------
# 로그 레벨: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 로그 파일 경로 (기본값: logs/screener.log)
# 참고: 일별 로그는 logs/YYYY-MM-DD.log 형식으로 자동 분리됨
LOG_PATH=logs/screener.log

# -------------------------------------------
# 스크리닝 설정
# -------------------------------------------
# 최소 거래대금 (억원)
MIN_TRADING_VALUE=100

# 프리뷰 스크리닝 시간 (HH:MM)
# v7.0: 12:00 권장 (점심시간 확인용)
SCREENING_TIME_1=12:00

# 최종 스크리닝 시간 (HH:MM)
SCREENING_TIME_2=15:00

# 학습 시간 (HH:MM)
LEARNING_TIME=16:30

# TOP N 종목 수 (기본 5)
TOP_N_COUNT=5

# -------------------------------------------
# 익일 결과 수집 설정
# -------------------------------------------
# 전체 종목 익일 결과 수집 여부
# true: 전체 스크리닝 종목의 익일 결과 수집 (학습 데이터 풍부)
# false: TOP3만 수집 (API 호출 최소화)
COLLECT_ALL_STOCKS=true

# API 호출 간격 (초, Rate Limit 방지)
# 기본값: 0.12 (초당 약 8회)
# 주의: 너무 낮게 설정하면 Rate Limit 에러 발생
API_CALL_INTERVAL=0.12

# -------------------------------------------
# 유니버스 설정 (v7.0 키움 기반)
# -------------------------------------------
# v7.0: 키움 REST API의 거래대금/거래량 상위 API로 유니버스 구성
# 조건: 거래대금 >= 150억, 거래량 150위 이내, 등락률 1~30%, 가격 2k~10k
#
# 폴백 동작:
# - 키움 API 실패 시 DB의 최근 스냅샷 사용 (FALLBACK 태그)
# - 스냅샷도 없으면 후보 0개로 진행 (프로그램 유지)

# 최소 유니버스 종목 수 (이보다 적으면 fallback 실행)
MIN_CANDIDATES=10

# 제외 키워드 (쉼표로 구분, 기본 키워드에 추가됨)
# 예: EXCLUDE_KEYWORDS=우선주,신주인수권
EXCLUDE_KEYWORDS=

# [레거시] 조건검색 관련 (사용 안함)
UNIVERSE_SOURCE=kiwoom_rank
CONDITION_NAME=
FALLBACK_ENABLED=true

# -------------------------------------------
# 이메일 알림 설정 (선택, 미구현)
# -------------------------------------------
# EMAIL_ENABLED=false
# EMAIL_SMTP_SERVER=smtp.gmail.com
# EMAIL_SMTP_PORT=587
# EMAIL_SENDER=your_email@gmail.com
# EMAIL_PASSWORD=your_app_password
# EMAIL_RECEIVER=receiver@gmail.com

# -------------------------------------------
# 텔레그램 알림 설정 (선택, 미구현)
# -------------------------------------------
# @BotFather에서 봇 생성 후 토큰 발급
# TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN_HERE
# TELEGRAM_CHAT_ID=YOUR_CHAT_ID_HERE

# -------------------------------------------
# 유목민 뉴스 수집 설정 (Gemini + 네이버)
# -------------------------------------------
# Gemini API (뉴스 요약용)
# Google AI Studio에서 발급: https://aistudio.google.com/
GEMINI_API_KEY=YOUR_GEMINI_API_KEY_HERE

# 네이버 검색 API (뉴스 검색용)
# 네이버 개발자센터에서 발급: https://developers.naver.com/
NaverAPI_Client_ID=YOUR_NAVER_CLIENT_ID_HERE
NaverAPI_Client_Secret=YOUR_NAVER_CLIENT_SECRET_HERE

# -------------------------------------------
# DART 전자공시 API 설정
# -------------------------------------------
# DART OpenAPI에서 발급: https://opendart.fss.or.kr/
# 인증키 신청 → 즉시 발급 (일일 40,000건 무료)
#
# 용도: 위험 공시 자동 탐지
# - 정리매매, 관리종목, 상장폐지
# - 유상증자, 전환사채 (희석 위험)
# - 횡령, 분식회계, 감사의견거절
DART_API_KEY=YOUR_DART_API_KEY_HERE

# -------------------------------------------
# v7.0 통합 파이프라인 설정
# -------------------------------------------
# Enrichment (DART + 뉴스) 활성화 여부
ENRICHMENT_ENABLED=true

# AI 배치 분석 활성화 여부
AI_BATCH_ENABLED=true

# Gemini 모델 선택
# gemini-2.5-flash-preview-05-20: 최신 프리뷰
# gemini-2.5-flash: 안정 버전
GEMINI_MODEL=gemini-2.5-flash
GEMINI_MAX_TOKENS=8192
GEMINI_TEMPERATURE=0.3

# -------------------------------------------
